import{I as u,a5 as d,a6 as l,a7 as f,a8 as h,a9 as _,aa as g,ab as A}from"./CZg8cpZA.js";const v=Symbol("is custom element"),L=Symbol("is html");function S(e){if(u){var s=!1,r=()=>{if(!s){if(s=!0,e.hasAttribute("value")){var t=e.value;n(e,"value",null),e.value=t}if(e.hasAttribute("checked")){var a=e.checked;n(e,"checked",null),e.checked=a}}};e.__on_r=r,l(r),f()}}function n(e,s,r,t){var a=p(e);u&&(a[s]=e.getAttribute(s),s==="src"||s==="srcset"||s==="href"&&e.nodeName==="LINK")||a[s]!==(a[s]=r)&&(s==="loading"&&(e[h]=r),r==null?e.removeAttribute(s):typeof r!="string"&&y(e).includes(s)?e[s]=r:e.setAttribute(s,r))}function p(e){return e.__attributes??={[v]:e.nodeName.includes("-"),[L]:e.namespaceURI===d}}var c=new Map;function y(e){var s=e.getAttribute("is")||e.nodeName,r=c.get(s);if(r)return r;c.set(s,r=[]);for(var t,a=e,o=Element.prototype;o!==a;){t=g(a);for(var i in t)t[i].set&&r.push(i);a=_(a)}return r}const m=()=>{const{subscribe:e,set:s,update:r}=A({user:null,isAuthenticated:!1,isLoading:!0});return{subscribe:e,checkAuth:async()=>{try{r(o=>({...o,isLoading:!0}));const a=await(await fetch("/api/me",{credentials:"include"})).json();a.authenticated&&a.user?s({user:a.user,isAuthenticated:!0,isLoading:!1}):s({user:null,isAuthenticated:!1,isLoading:!1})}catch(t){console.error("Auth check failed:",t),s({user:null,isAuthenticated:!1,isLoading:!1})}},login:()=>{window.location.href="/api/login"},logout:async()=>{try{await fetch("/api/logout",{method:"POST",credentials:"include"}),s({user:null,isAuthenticated:!1,isLoading:!1})}catch(t){console.error("Logout failed:",t)}},setLoading:t=>{r(a=>({...a,isLoading:t}))}}},k=m();export{k as a,S as r,n as s};
